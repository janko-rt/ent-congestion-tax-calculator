<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet  author="janko"  id="2025-07-28-01">
        <createSequence  dataType="int8"
                         incrementBy="1"
                         schemaName="public"
                         sequenceName="tax_seq"
                         startValue="1"/>
    </changeSet>
    <changeSet author="janko" id="2025-07-28-02" >
        <createTable tableName="tax">
            <column name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="tax_pk"/>
            </column>
            <column name="registration_plate_number" type="varchar(128)" >
                <constraints nullable="false" />
            </column>
            <column name="recorded_date" type="timestamp with time zone">
                <constraints nullable="false" />
            </column>
            <column name="amount" type="numeric(12,2)">
                <constraints nullable="false" />
            </column>
            <column name="currency" type="varchar(3)">
                <constraints nullable="false" />
            </column>
            <column name="tax_status" type="varchar(3)">
                <constraints nullable="false" />
            </column>
            <column name="uuid" type="varchar(128)">
                <constraints nullable="false" />
            </column>
            <column name="tax_timetable_id" type="BIGINT">
                <constraints referencedColumnNames="id" referencedTableName="tax_timetable" foreignKeyName="fk_tax_timetable"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="2025-07-28-06" author="janko">
        <modifyDataType tableName="tax" columnName="recorded_date" newDataType="timestamp without time zone"></modifyDataType>
    </changeSet>
    <changeSet id="2025-07-28-07" author="janko">
        <dropNotNullConstraint tableName="tax" columnName="registration_plate_number"></dropNotNullConstraint>
        <dropNotNullConstraint tableName="tax" columnName="recorded_date"></dropNotNullConstraint>
        <dropNotNullConstraint tableName="tax" columnName="amount"></dropNotNullConstraint>
        <dropNotNullConstraint tableName="tax" columnName="currency"></dropNotNullConstraint>
        <modifyDataType tableName="tax" columnName="tax_status" newDataType="varchar(64)"></modifyDataType>
        <addColumn tableName="tax">
            <column name="error_message" type="varchar(256)"></column>
        </addColumn>
    </changeSet>
</databaseChangeLog>